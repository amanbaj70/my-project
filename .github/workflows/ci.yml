name: Java CI with gradle

on:
 push:
   branches: [ master ]

jobs:
	build:
		runs-on: ubuntu-latest

		steps:
		- uses: actions/checkout@v4
  
    		- name: Set up JDK 1.8
      		  uses: actions/setup-java@v1
      		  with:
       			 java-version: 1.8
		- name: Grant execut permission
		  run: chmod +x gradlew
		- name: Build with Gradle
		  run: ./gradlew build
		- name: Login to Docker Hub
        	  uses: docker/login-action@v3
        	  with:
          		username: ${{ secrets.DOCKERHUB_USERNAME }}
          		password: ${{ secrets.DOCKERHUB_TOKEN }}
      		- name: Build and push
        	  uses: docker/build-push-action@v6
        	  with:
          		push: true
          		tags: amanbaj70/java-gradle-app:latest
